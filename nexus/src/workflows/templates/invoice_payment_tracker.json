{
  "id": "invoice_payment_tracker",
  "name": "Invoice Payment Tracker",
  "name_ar": "Ù…ØªØªØ¨Ø¹ Ø¯ÙØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±",
  "description": "Track invoice status, send automatic payment reminders at intervals, and alert on overdue payments. Integrates with accounting software to maintain accurate records and improve cash flow.",
  "description_ar": "ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ Ø¥Ø±Ø³Ø§Ù„ ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù„Ù‰ ÙØªØ±Ø§ØªØŒ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ.",
  "domain": "sme",
  "roiTier": 1,
  "annualValue": "$28,000/year",
  "requiredIntegrations": ["googlesheets", "gmail", "whatsapp"],
  "optionalIntegrations": ["quickbooks", "xero", "slack", "stripe"],
  "exampleUserInput": "Remind customers about unpaid invoices automatically",
  "exampleUserInput_ar": "Ø°ÙƒÙ‘Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹",
  "keywords": ["invoice", "payment", "reminder", "overdue", "accounts receivable", "billing", "ÙØ§ØªÙˆØ±Ø©", "Ø¯ÙØ¹", "ØªØ°ÙƒÙŠØ±", "Ù…ØªØ£Ø®Ø±", "Ø­Ø³Ø§Ø¨Ø§Øª", "ÙÙˆØªØ±Ø©"],
  "dynamicParameters": {
    "reminder_intervals": {
      "type": "array",
      "default": [7, 14, 30],
      "label": "Days after due date for reminders",
      "label_ar": "Ø£ÙŠØ§Ù… Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù„Ù„ØªØ°ÙƒÙŠØ±Ø§Øª"
    },
    "first_reminder_before": {
      "type": "number",
      "default": 3,
      "label": "Days before due date for first reminder",
      "label_ar": "Ø£ÙŠØ§Ù… Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„Ø£ÙˆÙ„"
    },
    "reminder_channel": {
      "type": "select",
      "options": ["email", "whatsapp", "both"],
      "default": "both",
      "label": "Reminder notification channel",
      "label_ar": "Ù‚Ù†Ø§Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ°ÙƒÙŠØ±"
    },
    "escalation_days": {
      "type": "number",
      "default": 45,
      "label": "Days overdue before escalation",
      "label_ar": "Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„ØªØµØ¹ÙŠØ¯"
    },
    "include_payment_link": {
      "type": "boolean",
      "default": true,
      "label": "Include payment link in reminders",
      "label_ar": "ØªØ¶Ù…ÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙØ¹ ÙÙŠ Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§Øª"
    }
  },
  "messages": {
    "upcoming_reminder_en": "Dear {{customer_name}},\n\nThis is a friendly reminder that invoice {{invoice_number}} for {{currency}} {{amount}} is due on {{due_date}} ({{days_until}} days).\n\n*Invoice Details:*\nInvoice #: {{invoice_number}}\nAmount: {{currency}} {{amount}}\nDue Date: {{due_date}}\n\n{{#if payment_link}}[Pay Now]({{payment_link}}){{/if}}\n\nIf you've already made this payment, please disregard this message.\n\nThank you for your business!\n{{business_name}}",
    "upcoming_reminder_ar": "Ø¹Ø²ÙŠØ²ÙŠ {{customer_name}}ØŒ\n\nÙ‡Ø°Ø§ ØªØ°ÙƒÙŠØ± ÙˆØ¯ÙŠ Ø¨Ø£Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© {{invoice_number}} Ø¨Ù…Ø¨Ù„Øº {{currency}} {{amount}} Ù…Ø³ØªØ­Ù‚Ø© ÙÙŠ {{due_date}} ({{days_until}} Ø£ÙŠØ§Ù…).\n\n*ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©:*\nØ±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©: {{invoice_number}}\nØ§Ù„Ù…Ø¨Ù„Øº: {{currency}} {{amount}}\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚: {{due_date}}\n\n{{#if payment_link}}[Ø§Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†]({{payment_link}}){{/if}}\n\nØ¥Ø°Ø§ Ù‚Ù…Øª Ø¨Ø§Ù„Ø¯ÙØ¹ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©.\n\nØ´ÙƒØ±Ø§Ù‹ Ù„ØªØ¹Ø§Ù…Ù„Ùƒ Ù…Ø¹Ù†Ø§!\n{{business_name}}",
    "overdue_reminder_en": "Dear {{customer_name}},\n\nInvoice {{invoice_number}} is now {{days_overdue}} days overdue.\n\n*Outstanding:*\nInvoice #: {{invoice_number}}\nAmount: {{currency}} {{amount}}\nDue Date: {{due_date}}\nDays Overdue: {{days_overdue}}\n\nPlease arrange payment at your earliest convenience to avoid service interruption.\n\n{{#if payment_link}}[Pay Now]({{payment_link}}){{/if}}\n\nIf you're experiencing difficulties, please contact us to discuss payment options.\n\n{{business_name}}",
    "overdue_reminder_ar": "Ø¹Ø²ÙŠØ²ÙŠ {{customer_name}}ØŒ\n\nØ§Ù„ÙØ§ØªÙˆØ±Ø© {{invoice_number}} Ù…ØªØ£Ø®Ø±Ø© Ø§Ù„Ø¢Ù† {{days_overdue}} ÙŠÙˆÙ….\n\n*Ø§Ù„Ù…Ø³ØªØ­Ù‚:*\nØ±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©: {{invoice_number}}\nØ§Ù„Ù…Ø¨Ù„Øº: {{currency}} {{amount}}\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚: {{due_date}}\nØ£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ±: {{days_overdue}}\n\nÙŠØ±Ø¬Ù‰ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯ÙØ¹ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª Ù…Ù…ÙƒÙ† Ù„ØªØ¬Ù†Ø¨ Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø©.\n\n{{#if payment_link}}[Ø§Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†]({{payment_link}}){{/if}}\n\nØ¥Ø°Ø§ ÙƒÙ†Øª ØªÙˆØ§Ø¬Ù‡ ØµØ¹ÙˆØ¨Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù…Ù†Ø§Ù‚Ø´Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹.\n\n{{business_name}}",
    "final_notice_en": "âš ï¸ FINAL NOTICE\n\nDear {{customer_name}},\n\nDespite previous reminders, invoice {{invoice_number}} remains unpaid for {{days_overdue}} days.\n\nAmount Due: {{currency}} {{amount}}\n\nThis is our final notice before we proceed with collection procedures.\n\nPlease settle this invoice within 7 days or contact us immediately to discuss.\n\n{{business_name}}",
    "payment_received_en": "âœ… *Payment Received - Thank You!*\n\nDear {{customer_name}},\n\nWe have received your payment:\n\nInvoice #: {{invoice_number}}\nAmount: {{currency}} {{amount}}\nReceived: {{payment_date}}\nMethod: {{payment_method}}\n\nThank you for your prompt payment!\n\n{{business_name}}",
    "payment_received_ar": "âœ… *ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¯ÙØ¹ - Ø´ÙƒØ±Ø§Ù‹!*\n\nØ¹Ø²ÙŠØ²ÙŠ {{customer_name}}ØŒ\n\nÙ„Ù‚Ø¯ Ø§Ø³ØªÙ„Ù…Ù†Ø§ Ø¯ÙØ¹ØªÙƒ:\n\nØ±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©: {{invoice_number}}\nØ§Ù„Ù…Ø¨Ù„Øº: {{currency}} {{amount}}\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: {{payment_date}}\nØ·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: {{payment_method}}\n\nØ´ÙƒØ±Ø§Ù‹ Ù„Ø¯ÙØ¹Ùƒ Ø§Ù„Ø³Ø±ÙŠØ¹!\n\n{{business_name}}",
    "internal_alert_en": "ğŸš¨ *Overdue Invoice Alert*\n\nCustomer: {{customer_name}}\nInvoice: {{invoice_number}}\nAmount: {{currency}} {{amount}}\nDays Overdue: {{days_overdue}}\n\nReminders Sent: {{reminder_count}}\nLast Contact: {{last_contact}}\n\n{{#if escalation}}âš ï¸ Escalation threshold reached{{/if}}",
    "weekly_ar_summary_en": "ğŸ“Š *Weekly Accounts Receivable Summary*\n\n*Outstanding Invoices:*\nTotal: {{currency}} {{total_outstanding}}\nCount: {{outstanding_count}}\n\n*By Status:*\nâ€¢ Current: {{currency}} {{current_amount}} ({{current_count}})\nâ€¢ 1-30 Days: {{currency}} {{days_30_amount}} ({{days_30_count}})\nâ€¢ 31-60 Days: {{currency}} {{days_60_amount}} ({{days_60_count}})\nâ€¢ 60+ Days: {{currency}} {{days_60_plus_amount}} ({{days_60_plus_count}})\n\n*Collected This Week:* {{currency}} {{collected}}\n*Collection Rate:* {{collection_rate}}%"
  },
  "executionPlan": {
    "tasks": [
      {
        "id": "task_1",
        "name": "Daily Invoice Check",
        "name_ar": "ÙØ­Øµ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ",
        "type": "trigger",
        "integrationId": "system",
        "dependencies": [],
        "config": {
          "toolSlug": "SYSTEM_SCHEDULE",
          "action": "cron",
          "params": {
            "schedule": "0 9 * * 0-4",
            "description": "Daily at 9 AM on workdays",
            "timezone": "{{timezone}}"
          }
        }
      },
      {
        "id": "task_2",
        "name": "Read Invoice Sheet",
        "name_ar": "Ù‚Ø±Ø§Ø¡Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±",
        "type": "action",
        "integrationId": "googlesheets",
        "dependencies": ["task_1"],
        "config": {
          "toolSlug": "GOOGLESHEETS_GET_VALUES",
          "action": "read",
          "params": {
            "spreadsheet_id": "{{invoices_sheet}}",
            "range": "Invoices!A:L"
          }
        }
      },
      {
        "id": "task_3",
        "name": "Categorize Invoices",
        "name_ar": "ØªØµÙ†ÙŠÙ Ø§Ù„ÙÙˆØ§ØªÙŠØ±",
        "type": "action",
        "integrationId": "system",
        "dependencies": ["task_2"],
        "config": {
          "toolSlug": "SYSTEM_PROCESS",
          "action": "categorize",
          "params": {
            "data": "{{task_2.values}}",
            "categories": {
              "upcoming": "days_until_due <= first_reminder_before AND days_until_due > 0",
              "due_today": "days_until_due === 0",
              "overdue_7": "days_overdue >= 7 AND days_overdue < 14",
              "overdue_14": "days_overdue >= 14 AND days_overdue < 30",
              "overdue_30": "days_overdue >= 30 AND days_overdue < escalation_days",
              "escalation": "days_overdue >= escalation_days"
            }
          }
        }
      },
      {
        "id": "task_4",
        "name": "Send Upcoming Reminders",
        "name_ar": "Ø¥Ø±Ø³Ø§Ù„ ØªØ°ÙƒÙŠØ±Ø§Øª Ù‚Ø§Ø¯Ù…Ø©",
        "type": "action",
        "integrationId": "gmail",
        "dependencies": ["task_3"],
        "config": {
          "toolSlug": "GMAIL_SEND_EMAIL",
          "action": "batch_send",
          "params": {
            "recipients": "{{task_3.upcoming}}",
            "subject": "Invoice {{invoice_number}} Due Soon - {{business_name}} / ÙØ§ØªÙˆØ±Ø© Ù…Ø³ØªØ­Ù‚Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹",
            "body": "{{messages.upcoming_reminder_{{language}}}}",
            "condition": "reminder_channel === 'email' OR reminder_channel === 'both'"
          }
        }
      },
      {
        "id": "task_5",
        "name": "Send WhatsApp Reminders",
        "name_ar": "Ø¥Ø±Ø³Ø§Ù„ ØªØ°ÙƒÙŠØ±Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨",
        "type": "action",
        "integrationId": "whatsapp",
        "dependencies": ["task_3"],
        "config": {
          "toolSlug": "WHATSAPP_SEND_MESSAGE",
          "action": "batch_send",
          "params": {
            "recipients": "{{task_3.overdue}}",
            "message": "{{messages.overdue_reminder_{{language}}}}",
            "condition": "reminder_channel === 'whatsapp' OR reminder_channel === 'both'"
          }
        }
      },
      {
        "id": "task_6",
        "name": "Send Final Notices",
        "name_ar": "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©",
        "type": "action",
        "integrationId": "gmail",
        "dependencies": ["task_3"],
        "config": {
          "toolSlug": "GMAIL_SEND_EMAIL",
          "action": "batch_send",
          "params": {
            "recipients": "{{task_3.escalation}}",
            "subject": "âš ï¸ FINAL NOTICE: Invoice {{invoice_number}} - {{business_name}}",
            "body": "{{messages.final_notice_en}}"
          }
        }
      },
      {
        "id": "task_7",
        "name": "Alert Team",
        "name_ar": "ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„ÙØ±ÙŠÙ‚",
        "type": "action",
        "integrationId": "slack",
        "dependencies": ["task_3"],
        "config": {
          "toolSlug": "SLACK_SEND_MESSAGE",
          "action": "send",
          "params": {
            "channel": "#accounts-receivable",
            "message": "{{messages.internal_alert_en}}",
            "condition": "task_3.escalation.length > 0"
          }
        }
      },
      {
        "id": "task_8",
        "name": "Log Reminders Sent",
        "name_ar": "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©",
        "type": "action",
        "integrationId": "googlesheets",
        "dependencies": ["task_4", "task_5", "task_6"],
        "config": {
          "toolSlug": "GOOGLESHEETS_UPDATE_VALUES",
          "action": "batch_update",
          "params": {
            "spreadsheet_id": "{{invoices_sheet}}",
            "updates": "{{reminder_log}}"
          }
        }
      }
    ],
    "requiredIntegrations": ["googlesheets", "gmail", "whatsapp"]
  },
  "preFlightQuestions": [
    {
      "id": "first_reminder_before",
      "question": "Days before due date for first reminder?",
      "question_ar": "Ø£ÙŠØ§Ù… Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„Ø£ÙˆÙ„ØŸ",
      "type": "number",
      "default": 3
    },
    {
      "id": "reminder_channel",
      "question": "How to send payment reminders?",
      "question_ar": "ÙƒÙŠÙ ØªØ±Ø³Ù„ ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙØ¹ØŸ",
      "type": "select",
      "options": [
        {"value": "email", "label": "Email Only"},
        {"value": "whatsapp", "label": "WhatsApp Only"},
        {"value": "both", "label": "Both (Recommended) / ÙƒÙ„Ø§Ù‡Ù…Ø§"}
      ],
      "default": "both"
    },
    {
      "id": "escalation_days",
      "question": "Days overdue before escalation?",
      "question_ar": "Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„ØªØµØ¹ÙŠØ¯ØŸ",
      "type": "number",
      "default": 45
    },
    {
      "id": "include_payment_link",
      "question": "Include payment link in reminders?",
      "question_ar": "ØªØ¶Ù…ÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙØ¹ ÙÙŠ Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§ØªØŸ",
      "type": "boolean",
      "default": true
    }
  ],
  "regionalConfig": {
    "kuwait": {
      "timezone": "Asia/Kuwait",
      "workDays": [0, 1, 2, 3, 4],
      "currency": "KWD",
      "defaultLanguage": "bilingual",
      "paymentMethods": ["KNET", "Bank Transfer", "Cash"]
    },
    "saudi": {
      "timezone": "Asia/Riyadh",
      "workDays": [0, 1, 2, 3, 4],
      "currency": "SAR",
      "defaultLanguage": "arabic",
      "paymentMethods": ["Mada", "Bank Transfer", "SADAD"]
    },
    "uae": {
      "timezone": "Asia/Dubai",
      "workDays": [1, 2, 3, 4, 5],
      "currency": "AED",
      "defaultLanguage": "english",
      "paymentMethods": ["Card", "Bank Transfer", "Apple Pay"]
    }
  }
}
